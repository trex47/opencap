<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.13"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>OpenCAP: OpenMolcas Interface</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/x-mathjax-config">
  MathJax.Hub.Config({
    extensions: ["tex2jax.js"],
    jax: ["input/TeX","output/HTML-CSS"],
});
</script><script type="text/javascript" src="https://cdn.jsdelivr.net/npm/mathjax@2/MathJax.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">OpenCAP
   </div>
   <div id="projectbrief">Electronic structure of metastable states</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.13 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

</div><!-- top -->
<div class="header">
  <div class="headertitle">
<div class="title">OpenMolcas Interface </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p><a href="https://molcas.gitlab.io/OpenMolcas/sphinx/">OpenMolcas</a> is a widely used quantum chemistry package which specializes in multiconfigurational approaches. Here, we focus on how to use the software in tandem with OpenCAP to perform calculations on resonances.</p>
<h1><a class="anchor" id="autotoc_md10"></a>
System</h1>
<p>OpenCAP can extract the basis set and geometry from two types of files generated by OpenMolcas: Molden, and rassi.h5. Set the "molecule" keyword to either "molden" or "molcas_rassi", and then set "basis_file" to the properly formatted molden/rassi.h5 file. The geometry and basis set can also be specified manually by setting the "molecule" keyword to inline, and setting "basis_file" to a basis set file specified in Psi4 format. Basis sets can be downloaded from the <a href="https://www.basissetexchange.org/">MolSSI</a> and modified to suit your purposes.</p>
<p><b>Relevant keywords</b> </p><table class="doxtable">
<tr>
<th>Keyword </th><th>Valid options </th><th>Description  </th></tr>
<tr>
<td>molecule </td><td>molden,rassi_h5,inline </td><td>Specifies which format to read the molecular geometry. If "inline" is chosen, the "$geometry" section is also required. </td></tr>
<tr>
<td>basis_file </td><td>path to basis file </td><td>Specifies the path to the basis file. When "molecule" is set to "molden","rassi_h5", or "qchem_fchk", this keyword should be set to a path to a file of the specified type. When "molecule" is set to "inline", this keyword should be set to a path to a basis set file formatted in "Psi4" style. </td></tr>
</table>
<h1><a class="anchor" id="autotoc_md11"></a>
CAP</h1>
<p>The key to the OpenMolcas interface is the RAS State Interaction program (RASSI). As stated in the OpenMolcas reference, RASSI "computes matrix elements of the Hamiltonian and other operators in a wave function basis, which consists of individually optimized CI expansions from the RASSCF program". Of crucial importance to us is that RASSI is able to compute and export one particle transition density matrices between each pair of states. When the 'TRD1' keyword is activated, these densities are exported to an HDF5 file titled $JOBNAME.rassi.h5. </p><pre class="fragment"> &amp;RASSI
 TRD1
</pre><p>OpenCAP uses these densities to compute the CAP matrix elements in state basis, which is required to perform perturbative CAP calculations.</p>
<p>In addition to the one particle densities, OpenCAP also requires a zeroth order Hamiltonian. For a proper description of correlation, an effective Hamiltonian from a multi-state second order perturbation theory method is required. OpenCAP is capable of reading the effective Hamiltonian from OpenMolcas outputs for the following methods: MS-CASPT2,XMS-CASPT2.</p>
<p><b>Relevant keywords</b> </p><table class="doxtable">
<tr>
<th>Keyword </th><th>Type </th><th>Description  </th></tr>
<tr>
<td>rassi_h5 </td><td>string </td><td>Relative or absolute path to rassi.h5 file containing TDMs. </td></tr>
<tr>
<td>molcas_output </td><td>string </td><td>Relative or absolute path to OpenMolcas output file. </td></tr>
<tr>
<td>h0_file </td><td>string </td><td>Relative or absolute path to properly formatted zeroth order Hamiltonian file. </td></tr>
</table>
<p><b>Example input</b> </p><pre class="fragment">$system
molecule molden
basis_file nosymm.rasscf.molden
$end

$perturb_cap
method ms-caspt2
package openmolcas
rassi_h5 nosymm.rassi.h5
h0_file heff.in
!molcas_output nosymm.out
nstates 10
CAP_TYPE box
CAP_X 2.76
CAP_Y 2.76
CAP_Z 4.88
Radial_precision  14
Angular_points    110
$end

$job
title MS-CASPT2(5,10) with 10 states for N2-, symmetry turned off
jobtype perturb_cap
$end
</pre><p>More inputs are available in our <a href="https://github.com/gayverjr/opencap/tree/master/examples/opencap">repository</a>. </p>
</div></div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.13
</small></address>
</body>
</html>
